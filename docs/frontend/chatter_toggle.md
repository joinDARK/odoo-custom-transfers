# Документация по chatter_toggle.js

## Описание
`chatter_toggle.js` — скрипт для добавления кнопки-переключателя видимости блока логов (chatter) на всех формах Odoo. Позволяет пользователю быстро скрывать/показывать логи (chatter) на любой форме.

## Архитектура
- **JS:** `static/src/js/chatter_toggle.js`
- Работает как на чистом JS, так и с jQuery (fallback).
- Автоматически инициализируется при загрузке DOM и отслеживает изменения URL/DOM (SPA).

## Основные функции
- **createToggleButton()**: Создаёт кнопку переключения и добавляет её в navbar.
- **removeToggleButton()**: Удаляет кнопку из DOM.
- **toggleChatter()**: Переключает видимость блока chatter (скрывает/показывает).
- **checkIfFormWithChatter()**: Проверяет наличие формы с chatter.
- **initChatterToggle()**: Инициализация кнопки при загрузке и при изменениях DOM.
- **debouncedCheck()**: Оптимизированная проверка наличия формы с chatter (каждые 3 секунды).

## Best practices по интеграции
- Подключайте скрипт на всех страницах, где используются формы с chatter.
- Для кастомных форм/виджетов убедитесь, что DOM-структура поддерживает стандартные классы Odoo (`.o_chatter`, `.o_form_view` и т.д.).
- Для расширения логики можно добавить кастомные обработчики событий или стили для кнопки.

## Пример интеграции
```html
<script src="/addons/amanat/static/src/js/chatter_toggle.js"></script>
```

## Важно
- Скрипт не зависит от специфики бизнес-логики и может быть переиспользован в других модулях Odoo.
- Для корректной работы требуется наличие стандартных классов Odoo в DOM. 